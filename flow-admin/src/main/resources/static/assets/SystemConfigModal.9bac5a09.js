var I=Object.defineProperty;var y=Object.getOwnPropertySymbols;var A=Object.prototype.hasOwnProperty,_=Object.prototype.propertyIsEnumerable;var D=(e,t,u)=>t in e?I(e,t,{enumerable:!0,configurable:!0,writable:!0,value:u}):e[t]=u,h=(e,t)=>{for(var u in t||(t={}))A.call(t,u)&&D(e,u,t[u]);if(y)for(var u of y(t))_.call(t,u)&&D(e,u,t[u]);return e};var E=(e,t,u)=>new Promise((n,r)=>{var f=a=>{try{o(u.next(a))}catch(d){r(d)}},l=a=>{try{o(u.throw(a))}catch(d){r(d)}},o=a=>a.done?n(a.value):Promise.resolve(a.value).then(f,l);o((u=u.apply(e,t)).next())});import{B as v,a as N}from"./index.309f7e13.js";import{B as P}from"./BasicForm.bfb70ce4.js";import{u as M}from"./useForm.9d0149a6.js";import{ax as m,_ as k}from"./index.aeb7d9f7.js";import{F as S}from"./constantEnum.82824ec7.js";import{A as j,r as q,u as F,j as V,a0 as b,B as O,a1 as R,a6 as K,w as L,a4 as U}from"./vendor.5879c5ca.js";var i;(function(e){e.SystemConfigPageList="/flow/base/systemConfig/getPagerModel",e.SaveOrUpdate="/flow/base/systemConfig/saveOrUpdate",e.Delete="/flow/base/systemConfig/delete",e.CheckEntityExist="/flow/base/systemConfig/checkEntityExist"})(i||(i={}));const te=e=>{const t=e&&{pageNum:e.pageNum,pageSize:e.pageSize};let u=e||{};u&&(delete u.pageNum,delete u.pageSize);const n={query:t,entity:u};return m.post({url:i.SystemConfigPageList,params:n})},$=e=>m.post({url:i.SaveOrUpdate,params:e}),se=e=>m.post({url:i.Delete,params:e}),T=e=>m.post({url:i.CheckEntityExist,params:e}),ae=[{title:"\u540D\u79F0",dataIndex:"configName",align:"left"},{title:"\u6807\u8BC6",dataIndex:"configSn",width:100,align:"left"},{title:"\u914D\u7F6EKey",dataIndex:"configKey",width:100,align:"left"},{title:"\u914D\u7F6EValue",dataIndex:"configValue",align:"left"},{title:"\u5907\u6CE8",dataIndex:"remark",align:"left"},{title:"\u6392\u5E8F",dataIndex:"configOrder",width:80},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createTime",width:180}],oe=[{field:"keyword",label:"\u5173\u952E\u5B57",component:"Input",componentProps:{placeholder:"\u8BF7\u8F93\u5165\u540D\u79F0/\u7F16\u7801"},labelWidth:60,colProps:{span:6,lg:{span:6,offset:0},sm:{span:10,offset:0},xs:{span:16,offset:0}}}],z=[{field:"id",label:"ID",component:"Input",show:!1},{field:"configName",label:"\u540D\u79F0",required:!0,component:"Input",rules:[{required:!0,whitespace:!0,message:"\u540D\u79F0\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{max:30,message:"\u5B57\u7B26\u957F\u5EA6\u4E0D\u80FD\u5927\u4E8E30\uFF01"}]},{field:"configSn",label:"\u6807\u8BC6",required:!0,component:"Input"},{field:"configKey",label:"\u914D\u7F6EKey",required:!0,component:"Input"},{field:"configValue",label:"\u914D\u7F6EValue",component:"Input",rules:[{max:100,message:"\u5B57\u7B26\u957F\u5EA6\u4E0D\u80FD\u5927\u4E8E100\uFF01"}]},{field:"configOrder",label:"\u6392\u5E8F\u53F7",required:!1,component:"InputNumber"},{field:"remark",label:"\u63CF\u8FF0",required:!1,component:"InputTextArea",rules:[{max:80,message:"\u5B57\u7B26\u957F\u5EA6\u4E0D\u80FD\u5927\u4E8E80\uFF01"}]}],W=j({name:"SystemConfigModal",components:{BasicModal:v,BasicForm:P},emits:["success","register"],setup(e,{emit:t}){const u=q(!0),[n,{resetFields:r,updateSchema:f,setFieldsValue:l,validate:o}]=M({labelWidth:100,schemas:z,showActionButtonGroup:!1}),a=s=>[{trigger:"blur",validator:(c,B)=>B?T({id:s.id,field:s.field,fieldValue:B,fieldName:s.fieldName}).then(p=>p?Promise.resolve():Promise.reject(s.fieldName+"\u5DF2\u5B58\u5728\uFF0C\u8BF7\u4FEE\u6539\uFF01")).catch(p=>Promise.reject(p)):Promise.resolve()}],[d,{setModalProps:g,closeModal:w}]=N(s=>E(this,null,function*(){yield r(),g({confirmLoading:!1}),u.value=!!(s==null?void 0:s.isUpdate);let c=s.record;yield f([{field:"configSn",dynamicRules:()=>[{required:!0,whitespace:!0,message:"\u6807\u8BC6\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{pattern:new RegExp(S.SN),type:"string",message:"\u8BF7\u8F93\u5165\u82F1\u6587\u6216\u6570\u5B57\uFF01"},{max:60,message:"\u5B57\u7B26\u957F\u5EA6\u4E0D\u80FD\u5927\u4E8E60\uFF01"},...a({id:F(u)&&c&&c.id||"",field:"configSn",fieldValue:"",fieldName:"\u6807\u8BC6"})]},{field:"configKey",dynamicRules:()=>[{required:!0,whitespace:!0,message:"\u914D\u7F6EKey\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{pattern:new RegExp(S.SN),type:"string",message:"\u8BF7\u8F93\u5165\u82F1\u6587\u6216\u6570\u5B57\uFF01"},{max:30,message:"\u5B57\u7B26\u957F\u5EA6\u4E0D\u80FD\u5927\u4E8E30\uFF01"},...a({id:F(u)&&c&&c.id||"",field:"configKey",fieldValue:"",fieldName:"\u914D\u7F6EKey"})]}]),F(u)&&l(h({},s.record))})),x=V(()=>F(u)?"\u4FEE\u6539":"\u65B0\u589E");function C(){return E(this,null,function*(){try{g({confirmLoading:!0});const s=yield o();yield $(s),w(),t("success")}finally{g({confirmLoading:!1})}})}return{registerModal:d,registerForm:n,getTitle:x,handleSubmit:C}}});function G(e,t,u,n,r,f){const l=b("BasicForm"),o=b("BasicModal");return O(),R(o,U(e.$attrs,{onRegister:e.registerModal,title:e.getTitle,onOk:e.handleSubmit}),{default:K(()=>[L(l,{onRegister:e.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var H=k(W,[["render",G]]),ne=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:H});export{H as S,ne as a,ae as c,se as d,te as g,oe as s};
