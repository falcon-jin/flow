var _=Object.defineProperty,v=Object.defineProperties;var S=Object.getOwnPropertyDescriptors;var j=Object.getOwnPropertySymbols;var y=Object.prototype.hasOwnProperty,A=Object.prototype.propertyIsEnumerable;var h=(s,t,e)=>t in s?_(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,B=(s,t)=>{for(var e in t||(t={}))y.call(t,e)&&h(s,e,t[e]);if(j)for(var e of j(t))A.call(t,e)&&h(s,e,t[e]);return s},w=(s,t)=>v(s,S(t));var p=(s,t,e)=>new Promise((l,n)=>{var m=o=>{try{a(e.next(o))}catch(d){n(d)}},i=o=>{try{a(e.throw(o))}catch(d){n(d)}},a=o=>o.done?l(o.value):Promise.resolve(o.value).then(m,i);a((e=e.apply(s,t)).next())});import{B as C,a as D}from"./index.309f7e13.js";import{B as R}from"./BasicForm.bfb70ce4.js";import{u as P}from"./useForm.9d0149a6.js";import{f as $,a as k,b as N}from"./module.data.b1907f42.js";import{_ as V}from"./index.aeb7d9f7.js";import{A as L,r as O,u as F,j as U,a0 as x,B as z,a1 as T,a6 as W,w as q,a4 as G}from"./vendor.5879c5ca.js";import"./useWindowSizeFn.6a6adedd.js";/* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css               *//* empty css                *//* empty css                */import"./index.661e65ad.js";/* empty css                *//* empty css                *//* empty css                *//* empty css                */import"./uuid.2b29000c.js";import"./download.6c7231a4.js";import"./base64Conver.bb012c73.js";import"./index.77bdba74.js";const I=L({name:"ModuleModal",components:{BasicModal:C,BasicForm:R},emits:["success","register"],setup(s,{emit:t}){const e=O(!0),[l,{resetFields:n,setFieldsValue:m,updateSchema:i,validate:a}]=P({labelWidth:100,schemas:$,showActionButtonGroup:!1}),o=r=>[{trigger:"blur",validator:(u,g)=>g?k({id:r.id,field:r.field,fieldValue:g,fieldName:r.fieldName}).then(f=>f?Promise.resolve():Promise.reject(r.fieldName+"\u5DF2\u5B58\u5728\uFF0C\u8BF7\u4FEE\u6539\uFF01")).catch(f=>Promise.reject(f)):Promise.resolve()}],[d,{setModalProps:c,closeModal:b}]=D(r=>p(this,null,function*(){yield n(),c({confirmLoading:!1}),e.value=!!(r==null?void 0:r.isUpdate);let u=r.record;yield i([{field:"sn",dynamicRules:()=>[{required:!0,whitespace:!0,message:"\u6807\u8BC6\u4E0D\u80FD\u4E3A\u7A7A\uFF01"},{trigger:["change","blur"],pattern:new RegExp("^[0-9a-zA-Z_]{1,}$"),type:"string",message:"\u8BF7\u8F93\u5165\u82F1\u6587\u6216\u6570\u5B57\uFF01"},{trigger:["change","blur"],max:64,message:"\u5B57\u7B26\u957F\u5EA6\u4E0D\u80FD\u5927\u4E8E64\uFF01"},...o({id:F(e)&&u&&u.id||"",field:"sn",fieldValue:"",fieldName:"\u6807\u8BC6"})]}]),F(e)&&m(w(B({},u),{status:u.status===1,showStatus:u.showStatus===1})),r.record.id?i([{field:"component",show:!1},{field:"url",show:!1}]):i([{field:"component",show:!0},{field:"url",show:!0}])})),E=U(()=>F(e)?"\u4FEE\u6539":"\u65B0\u589E");function M(){return p(this,null,function*(){try{c({confirmLoading:!0});const r=yield a();r.status=r.status?1:0,r.showStatus=r.showStatus?1:0,yield N(r),b(),t("success")}finally{c({confirmLoading:!1})}})}return{registerModal:d,registerForm:l,getTitle:E,handleSubmit:M}}});function Z(s,t,e,l,n,m){const i=x("BasicForm"),a=x("BasicModal");return z(),T(a,G(s.$attrs,{onRegister:s.registerModal,title:s.getTitle,onOk:s.handleSubmit}),{default:W(()=>[q(i,{onRegister:s.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var Be=V(I,[["render",Z]]);export{Be as default};
