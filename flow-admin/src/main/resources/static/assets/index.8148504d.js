var c=(t,i,u)=>new Promise((l,n)=>{var d=e=>{try{o(u.next(e))}catch(s){n(s)}},r=e=>{try{o(u.throw(e))}catch(s){n(s)}},o=e=>e.done?l(e.value):Promise.resolve(e.value).then(d,r);o((u=u.apply(t,i)).next())});import{B as E,a as x}from"./index.309f7e13.js";import{B as j}from"./TableImg.56f74f95.js";import{B as w,T as h}from"./BasicForm.bfb70ce4.js";import{u as _}from"./useTable.df715f1a.js";import{g as y}from"./role.56cae01d.js";import{P as D}from"./index.37a89528.js";import A from"./CompanyTree.b920082a.js";import{F as C}from"./constantEnum.82824ec7.js";import{_ as I}from"./index.aeb7d9f7.js";import{A as T,j as S,a0 as m,B as R,a1 as v,a6 as f,w as p,a4 as P}from"./vendor.5879c5ca.js";import"./useWindowSizeFn.6a6adedd.js";/* empty css                *//* empty css              */import"./useForm.9d0149a6.js";/* empty css                *//* empty css                *//* empty css               */import"./uuid.2b29000c.js";/* empty css               */import"./useSortable.514a2720.js";/* empty css                *//* empty css                *//* empty css               *//* empty css               */import"./index.661e65ad.js";/* empty css                *//* empty css                *//* empty css                */import"./download.6c7231a4.js";import"./base64Conver.bb012c73.js";import"./index.77bdba74.js";/* empty css                *//* empty css                */import"./useContentViewHeight.6345b5e8.js";import"./Tree.vue_vue_type_style_index_0_lang.6dd32286.js";import"./useContextMenu.c42040e5.js";import"./company.711332d1.js";const q=[{title:"\u540D\u79F0",dataIndex:"name",width:150,align:"left"},{title:"\u6807\u8BC6",dataIndex:"sn",width:120,align:"left"},{title:"\u516C\u53F8",dataIndex:"companyName",width:120,align:"left"}],M=[{field:"keyword",label:"\u5173\u952E\u5B57",component:"Input",labelWidth:60,colProps:{span:12,lg:{span:12,offset:0},sm:{span:10,offset:0},xs:{span:16,offset:0}}}];new RegExp(C.SN),new RegExp("^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\\d{8}$"),new RegExp("^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$");const k=T({name:"RoleSelector",components:{BasicModal:E,BasicForm:w,BasicTable:j,PageWrapper:D,CompanyTree:A,TableAction:h},setup(t,{emit:i}){let u="";const[l,{setModalProps:n,closeModal:d}]=x(a=>c(this,null,function*(){n({wrapClassName:"selector-content"}),u=a.personalId,o({searchInfo:{personalId:u}})})),[r,{reload:o,getSelectRows:e}]=_({title:"",api:y,immediate:!1,columns:q,rowSelection:{type:"checkbox",columnWidth:30},formConfig:{labelWidth:60,schemas:M,showResetButton:!1,showAdvancedButton:!1,autoSubmitOnEnter:!0},size:"small",canResize:!1,useSearchForm:!0,showTableSetting:!1,showIndexColumn:!1,bordered:!0,scroll:{y:300}}),s=S(()=>"\u9009\u62E9\u89D2\u8272");function F(){o()}function g(){const a=e();i("success",a),d()}function b(a){let B={companyId:a?a.id:"",personalId:u};o({searchInfo:B})}return{registerTable:r,registerModal:l,getTitle:s,handleSubmit:g,handleSuccess:F,handleSelect:b}}});function W(t,i,u,l,n,d){const r=m("CompanyTree"),o=m("BasicTable"),e=m("PageWrapper"),s=m("BasicModal");return R(),v(s,P({wrapClassName:"selector-body"},t.$attrs,{onRegister:t.registerModal,title:t.getTitle,onOk:t.handleSubmit}),{default:f(()=>[p(e,{dense:"",contentClass:"flex"},{default:f(()=>[p(r,{class:"w-1/4 xl:w-3/10",onSelect:t.handleSelect},null,8,["onSelect"]),p(o,{onRegister:t.registerTable,class:"w-3/4 xl:w-7/10"},null,8,["onRegister"])]),_:1})]),_:1},16,["onRegister","title","onOk"])}var he=I(k,[["render",W]]);export{he as default};
