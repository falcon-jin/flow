import{B as A}from"./TableImg.56f74f95.js";import{T as I}from"./BasicForm.bfb70ce4.js";import{u as E}from"./useTable.df715f1a.js";import{b as D,d as R,p as k,c as $}from"./modelInfo.8dec6c05.js";import{P as W}from"./index.37a89528.js";import H from"./FlowCategoryTree.15b98a4d.js";import{b as M}from"./index.309f7e13.js";import{M as O,c as U,s as V}from"./ModelInfoModal.1bdb27d7.js";import K from"./index.3226ab16.js";import{A as N,bA as z,c2 as G,aE as L,ba as q,c8 as J,r as j,$ as Q,a0 as a,bo as Y,F as Z,B as ee,a1 as oe,a6 as d,w as i,u as X,ae as te}from"./vendor.5879c5ca.js";/* empty css               *//* empty css                *//* empty css                */import{a as ne}from"./app.19f09dd6.js";import{_ as se,r as ae,h as ie}from"./index.aeb7d9f7.js";import{A as re}from"./index.f944d10b.js";/* empty css                *//* empty css              */import"./useForm.9d0149a6.js";/* empty css                *//* empty css                */import"./uuid.2b29000c.js";import"./useWindowSizeFn.6a6adedd.js";/* empty css               */import"./useSortable.514a2720.js";/* empty css                *//* empty css               *//* empty css               */import"./index.661e65ad.js";/* empty css                *//* empty css                *//* empty css                */import"./download.6c7231a4.js";import"./base64Conver.bb012c73.js";import"./index.77bdba74.js";/* empty css                */import"./useContentViewHeight.6345b5e8.js";import"./Tree.vue_vue_type_style_index_0_lang.6dd32286.js";import"./useContextMenu.c42040e5.js";import"./category.9a93d905.js";/* empty css                *//* empty css                */import"./index.09479185.js";import"./index.esm.01aeab01.js";const{createMessage:F}=ie(),le=N({name:"Bpmn",components:{BasicTable:A,PageWrapper:W,FlowCategoryTree:H,ModelInfoModal:O,TableAction:I,Avatar:z,Badge:G,Popconfirm:L,Tag:q,DeleteOutlined:J,Authority:re,BpmnPreviewModal:K},setup(){const o=ae(),[_,{openModal:u}]=M(),[x,{openModal:w,setModalProps:C}]=M();j({});const r=j({}),t=j(!1),[c,{getForm:p,reload:n}]=E({title:"\u5217\u8868",api:D,columns:U,formConfig:{labelWidth:120,schemas:V,showAdvancedButton:!1,showResetButton:!1,autoSubmitOnEnter:!0},searchInfo:{modelType:0},useSearchForm:!0,showIndexColumn:!1,bordered:!0,actionColumn:{width:210,align:"left",title:"\u64CD\u4F5C",dataIndex:"action",slots:{customRender:"action"}}});Q(()=>{const{updateSchema:e}=p();ne().then(s=>{e([{field:"appSn",componentProps:{options:s,labelField:"id"}}])})});function m(){if(!X(r).code){F.warning("\u8BF7\u9009\u62E9\u5206\u7C7B\uFF01",2);return}u(!0,{record:{categoryCode:X(r).code},isUpdate:!0})}function f(e,s){const{status:h}=e;return[{icon:"ant-design:eye",tooltip:"\u6D41\u7A0B\u56FE\u9884\u89C8",label:"",onClick:b.bind(null,e)},{icon:"ant-design:play-circle-filled",tooltip:"\u53D1\u5E03",label:"",popConfirm:{title:"\u786E\u8BA4\u53D1\u5E03\u5417?",confirm:v.bind(null,e)},ifShow:h===2},{icon:"ant-design:stop-twotone",tooltip:"\u505C\u7528",label:"",popConfirm:{title:"\u786E\u8BA4\u505C\u7528\u5417?",confirm:y.bind(null,e)},ifShow:h===3||h===2},{icon:"clarity:note-edit-line",tooltip:"\u4FEE\u6539",label:"",onClick:l.bind(null,e)},{icon:"ant-design:delete-outlined",color:"error",tooltip:"\u5220\u9664",label:"",popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",confirm:B.bind(null,e)}}]}function b(e){w(!0,{modelKey:e.modelKey,isUpdate:!0}),C({title:`\u9884\u89C8-${e.name}`,bodyStyle:{padding:"0px",margin:"0px"},width:900,height:400,showOkBtn:!1,showCancelBtn:!0,cancelText:"\u5173\u95ED"})}function l(e){u(!0,{record:e,isUpdate:!0})}function g(){o("/flowable/bpmn/designer?modelId=XXXXXXXXXXXXXXXXXXXXXXXX")}function B(e){R([e.id]).then(s=>{n()})}function v(e){t.value=!0,k(e.modelId).then(s=>{n(),F.success("\u53D1\u5E03\u6210\u529F\uFF01",2)}).finally(()=>{t.value=!1})}function y(e){t.value=!0,$(e.modelId).then(s=>{n()}).finally(()=>{t.value=!1})}function T(){n()}function S(){}function P(e){r.value=e;let s={categoryCode:e?e.code:""};n({searchInfo:s})}return{loadingRef:t,registerTable:c,registerBpmnPreviewModal:x,registerModal:_,handlePublish:v,handleStop:y,createActions:f,handleCreate:m,handleEdit:l,cancelDeleteRole:S,handleDelete:B,handleSuccess:T,openTab:g,handleSelect:P}}}),de=te(" \u65B0\u589E ");function ue(o,_,u,x,w,C){const r=a("FlowCategoryTree"),t=a("a-button"),c=a("TableAction"),p=a("BasicTable"),n=a("ModelInfoModal"),m=a("BpmnPreviewModal"),f=a("PageWrapper"),b=Y("loading");return Z((ee(),oe(f,{dense:"",contentFullHeight:"",fixedHeight:"",contentClass:"flex"},{default:d(()=>[i(r,{class:"w-1/4 xl:w-1/5",onSelect:o.handleSelect},null,8,["onSelect"]),i(p,{onRegister:o.registerTable,class:"w-3/4 xl:w-4/5"},{toolbar:d(()=>[i(t,{type:"primary",onClick:o.handleCreate},{default:d(()=>[de]),_:1},8,["onClick"])]),action:d(({record:l,column:g})=>[i(c,{actions:o.createActions(l,g)},null,8,["actions"])]),_:1},8,["onRegister"]),i(n,{onRegister:o.registerModal,onSuccess:o.handleSuccess},null,8,["onRegister","onSuccess"]),i(m,{onRegister:o.registerBpmnPreviewModal,onSuccess:o.handleSuccess},null,8,["onRegister","onSuccess"])]),_:1},512)),[[b,o.loadingRef]])}var to=se(le,[["render",ue],["__scopeId","data-v-cd2ca054"]]);export{to as default};
