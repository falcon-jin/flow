var M=Object.defineProperty;var f=Object.getOwnPropertySymbols;var _=Object.prototype.hasOwnProperty,w=Object.prototype.propertyIsEnumerable;var j=(o,s,e)=>s in o?M(o,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[s]=e,g=(o,s)=>{for(var e in s||(s={}))_.call(s,e)&&j(o,e,s[e]);if(f)for(var e of f(s))w.call(s,e)&&j(o,e,s[e]);return o};var c=(o,s,e)=>new Promise((d,p)=>{var m=r=>{try{a(e.next(r))}catch(t){p(t)}},u=r=>{try{a(e.throw(r))}catch(t){p(t)}},a=r=>r.done?d(r.value):Promise.resolve(r.value).then(m,u);a((e=e.apply(o,s)).next())});import{B as P,a as V}from"./index.309f7e13.js";import{B as C}from"./BasicForm.bfb70ce4.js";import{u as S}from"./useForm.9d0149a6.js";import{p as E,e as $}from"./module.data.b1907f42.js";import{g as k}from"./appPrivilegeValue.1000a503.js";import{_ as y}from"./index.aeb7d9f7.js";import{A as R,r as A,u as B,j as L,a0 as v,B as O,a1 as T,a6 as U,w as W,a4 as z}from"./vendor.5879c5ca.js";import"./useWindowSizeFn.6a6adedd.js";/* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css               *//* empty css                *//* empty css                */import"./index.661e65ad.js";/* empty css                *//* empty css                *//* empty css                *//* empty css                */import"./uuid.2b29000c.js";import"./download.6c7231a4.js";import"./base64Conver.bb012c73.js";import"./index.77bdba74.js";const D=R({name:"PValueSettingModal",components:{BasicModal:P,BasicForm:C},emits:["success","register"],setup(o,{emit:s}){const e=A(!0),[d,{resetFields:p,setFieldsValue:m,updateSchema:u,validate:a}]=S({labelWidth:100,schemas:E,showActionButtonGroup:!1}),[r,{setModalProps:t,closeModal:x}]=V(i=>c(this,null,function*(){if(p(),t({confirmLoading:!1,title:"\u8BBE\u7F6E\u83DC\u5355\u3010"+i.record.name+"\u3011\u7684\u6743\u9650\u503C"}),e.value=!!(i==null?void 0:i.isUpdate),B(e)){m(g({},i.record));let l=(yield k())||[];l.forEach(n=>{n.value=n.position,n.label=n.name});const h=i.record.pvs.map(n=>n.position);u({field:"pvs",componentProps:{options:l}}),m({pvs:h})}})),b=L(()=>B(e)?"\u8BBE\u7F6E\u6743\u9650\u503C":"\u65B0\u589E");function F(){return c(this,null,function*(){try{t({confirmLoading:!0});const i=yield a();i.pvs=i.pvs.map(l=>({position:l})),yield $(i),x(),s("success")}finally{t({confirmLoading:!1})}})}return{registerModal:r,registerForm:d,getTitle:b,handleSubmit:F}}});function G(o,s,e,d,p,m){const u=v("BasicForm"),a=v("BasicModal");return O(),T(a,z(o.$attrs,{onRegister:o.registerModal,title:o.getTitle,onOk:o.handleSubmit}),{default:U(()=>[W(u,{onRegister:o.registerForm},null,8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var ge=y(D,[["render",G]]);export{ge as default};
