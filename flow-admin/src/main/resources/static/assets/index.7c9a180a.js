var C=(e,s,n)=>new Promise((m,p)=>{var f=o=>{try{i(n.next(o))}catch(a){p(a)}},u=o=>{try{i(n.throw(o))}catch(a){p(a)}},i=o=>o.done?m(o.value):Promise.resolve(o.value).then(f,u);i((n=n.apply(e,s)).next())});import{B}from"./TableImg.56f74f95.js";import{T as x}from"./BasicForm.bfb70ce4.js";import{u as T}from"./useTable.df715f1a.js";import{g as E,c as _,s as F,d as S}from"./module.data.b1907f42.js";import{_ as P,h as w}from"./index.aeb7d9f7.js";import D from"./ModuleModal.b54484db.js";import V from"./PValueSettingModal.7440b37d.js";import{b as M}from"./index.309f7e13.js";import{A as k,$ as A,a0 as d,B as v,D as R,w as r,a6 as h,ae as y}from"./vendor.5879c5ca.js";/* empty css                *//* empty css              */import"./useForm.9d0149a6.js";import"./index.37a89528.js";/* empty css                *//* empty css                */import"./useWindowSizeFn.6a6adedd.js";import"./useContentViewHeight.6345b5e8.js";/* empty css                *//* empty css                *//* empty css               */import"./uuid.2b29000c.js";/* empty css               */import"./useSortable.514a2720.js";/* empty css                *//* empty css                *//* empty css               *//* empty css               */import"./index.661e65ad.js";/* empty css                *//* empty css                *//* empty css                */import"./download.6c7231a4.js";import"./base64Conver.bb012c73.js";import"./index.77bdba74.js";import"./appPrivilegeValue.1000a503.js";const{createMessage:$}=w(),I=k({name:"Module",components:{BasicTable:B,TableAction:x,ModuleModal:D,PValueSettingModal:V},setup(){const[e,{openModal:s,setModalProps:n}]=M(),[m,{openModal:p}]=M(),[f,{reload:u,expandAll:i}]=T({title:"\u5217\u8868",api:E,columns:_,isTreeTable:!0,formConfig:{labelWidth:120,schemas:F,showAdvancedButton:!1,showResetButton:!1,autoSubmitOnEnter:!0},expandRowByClick:!0,canColDrag:!0,useSearchForm:!0,pagination:!1,bordered:!0,showIndexColumn:!1,actionColumn:{width:170,title:"\u64CD\u4F5C",dataIndex:"action",slots:{customRender:"action"}}});A(()=>{setTimeout(()=>{i()},1e3)});function o(t){n({title:"\u65B0\u589E\u83DC\u5355"}),s(!0,{record:t,isUpdate:!1})}function a(t,c){c.stopPropagation(),n({title:"\u65B0\u589E\u3010"+t.name+"\u3011\u7684\u5B50\u83DC\u5355"}),t={pid:t.id},s(!0,{record:t,isUpdate:!0})}function b(t,c){c.stopPropagation(),p(!0,{record:t,isUpdate:!0})}function g(t,c){c.stopPropagation(),n({title:"\u4FEE\u6539\u83DC\u5355"}),s(!0,{record:t,isUpdate:!0})}function l(t){if(t.children&&t.children.length>0){$.warning("\u6709\u5B50\u8282\u70B9\uFF0C\u4E0D\u80FD\u5220\u9664\uFF01");return}S([t.id]).then(()=>{u()})}function j(){return C(this,null,function*(){yield u(),setTimeout(()=>{i()},100)})}return{registerTable:f,registerModal:e,registerPValueModal:m,handleCreate:o,handleEdit:g,handleEditPValue:b,handleCreateChild:a,handleDelete:l,handleSuccess:j}}}),U=y(" \u65B0\u589E ");function N(e,s,n,m,p,f){const u=d("a-button"),i=d("Authority"),o=d("TableAction"),a=d("BasicTable"),b=d("ModuleModal"),g=d("PValueSettingModal");return v(),R("div",null,[r(a,{onRegister:e.registerTable},{toolbar:h(()=>[r(i,{value:"Module:0"},{default:h(()=>[r(u,{type:"primary",onClick:e.handleCreate},{default:h(()=>[U]),_:1},8,["onClick"])]),_:1})]),action:h(({record:l})=>[r(o,{actions:[{auth:"Module:0",tooltip:"\u6DFB\u52A0\u5B50\u83DC\u5355",icon:"ant-design:plus-outlined",onClick:e.handleCreateChild.bind(null,l)},{auth:"Module:6",tooltip:"\u8BBE\u7F6E\u6743\u9650\u503C",icon:"ant-design:setting-outlined",onClick:e.handleEditPValue.bind(null,l)},{auth:"Module:2",tooltip:"\u4FEE\u6539",icon:"clarity:note-edit-line",onClick:e.handleEdit.bind(null,l)},{auth:"Module:3",tooltip:"\u5220\u9664",icon:"ant-design:delete-outlined",color:"error",onClick:j=>{j.stopPropagation()},popConfirm:{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664",confirm:e.handleDelete.bind(null,l)}}]},null,8,["actions"])]),_:1},8,["onRegister"]),r(b,{onRegister:e.registerModal,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"]),r(g,{onRegister:e.registerPValueModal,onSuccess:e.handleSuccess},null,8,["onRegister","onSuccess"])])}var Te=P(I,[["render",N]]);export{Te as default};
