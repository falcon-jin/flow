var M=Object.defineProperty;var b=Object.getOwnPropertySymbols;var w=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable;var h=(o,s,e)=>s in o?M(o,s,{enumerable:!0,configurable:!0,writable:!0,value:e}):o[s]=e,v=(o,s)=>{for(var e in s||(s={}))w.call(s,e)&&h(o,e,s[e]);if(b)for(var e of b(s))K.call(s,e)&&h(o,e,s[e]);return o};var x=(o,s,e)=>new Promise((l,p)=>{var j=r=>{try{i(e.next(r))}catch(n){p(n)}},_=r=>{try{i(e.throw(r))}catch(n){p(n)}},i=r=>r.done?l(r.value):Promise.resolve(r.value).then(j,_);i((e=e.apply(o,s)).next())});import{B as T,a as A}from"./index.309f7e13.js";import{B as R}from"./BasicForm.bfb70ce4.js";import{u as k}from"./useForm.9d0149a6.js";import{a as $}from"./app.data.1e80cc44.js";import{r as O}from"./app.19f09dd6.js";import{_ as P,b3 as E,h as L}from"./index.aeb7d9f7.js";import{A as U,aT as V,ao as S,c3 as H,aE as N,cu as Q,r as D,u as B,j as I,a0 as u,B as W,a1 as z,a6 as a,w as d,ae as C,J as G,H as J,a4 as q}from"./vendor.5879c5ca.js";/* empty css                */import"./useWindowSizeFn.6a6adedd.js";/* empty css               *//* empty css               *//* empty css               *//* empty css                *//* empty css              *//* empty css               *//* empty css                *//* empty css                */import"./index.661e65ad.js";/* empty css                *//* empty css                *//* empty css                *//* empty css                */import"./uuid.2b29000c.js";import"./download.6c7231a4.js";import"./base64Conver.bb012c73.js";import"./index.77bdba74.js";const{TextArea:X}=S,Y=U({name:"SecretKeyModal",components:{BasicModal:T,BasicForm:R,Button:V,Input:S,TextArea:X,Space:H,Popconfirm:N,QuestionCircleOutlined:Q},emits:["success","register"],setup(o,{emit:s}){const e=D(!0),l=D(""),{createMessage:p}=L(),{clipboardRef:j,copiedRef:_}=E(),[i,{resetFields:r,setFieldsValue:n}]=k({labelWidth:100,schemas:$,showActionButtonGroup:!1}),[F,{setModalProps:m}]=A(t=>x(this,null,function*(){yield r(),m({confirmLoading:!1}),e.value=!!(t==null?void 0:t.isUpdate);let y=t.record;l.value=y.secretKey,B(e)&&n(v({},t.record))})),g=I(()=>B(e)?"\u4FEE\u6539":"\u65B0\u589E");function c(t){return x(this,null,function*(){try{m({confirmLoading:!0});const y=yield O(t.id);l.value=y,n({secretKey:y})}finally{m({confirmLoading:!1})}})}function f(){try{const t=B(l);if(!t){p.warning("\u8BF7\u91CD\u65B0\u83B7\u53D6\u5BC6\u94A5\uFF01");return}j.value=t,B(_)&&p.success("\u62F7\u8D1D\u6210\u529F\uFF01")}finally{m({confirmLoading:!1})}}return{registerModal:F,registerForm:i,getTitle:g,handleCopy:f,refreshSecretKeyHandle:c}}}),Z={class:""},ee=C(" \u83B7\u53D6 "),oe=C(" \u590D\u5236 ");function se(o,s,e,l,p,j){const _=u("TextArea"),i=u("QuestionCircleOutlined"),r=u("a-button"),n=u("Popconfirm"),F=u("Space"),m=u("BasicForm"),g=u("BasicModal");return W(),z(g,q(o.$attrs,{onRegister:o.registerModal,title:o.getTitle,onOk:o.handleSubmit}),{default:a(()=>[d(m,{onRegister:o.registerForm},{snSlot:a(({model:c,field:f})=>[C(G(c[f]),1)]),secretKeySlot:a(({model:c,field:f})=>[J("div",Z,[d(_,{readonly:"",rows:4,value:c[f],"onUpdate:value":t=>c[f]=t},null,8,["value","onUpdate:value"]),d(F,{class:"mt-2"},{default:a(()=>[d(n,{title:"\u91CD\u65B0\u83B7\u53D6\u79D8\u94A5\u5417\uFF1F",onConfirm:t=>o.refreshSecretKeyHandle(c)},{icon:a(()=>[d(i,{style:{color:"red"}})]),default:a(()=>[d(r,null,{default:a(()=>[ee]),_:1})]),_:2},1032,["onConfirm"]),d(r,{type:"primary",onClick:o.handleCopy},{default:a(()=>[oe]),_:1},8,["onClick"])]),_:2},1024)])]),_:1},8,["onRegister"])]),_:1},16,["onRegister","title","onOk"])}var Ke=P(Y,[["render",se]]);export{Ke as default};
